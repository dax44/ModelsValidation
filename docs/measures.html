<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pl" xml:lang="pl"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Metody walidacji modeli statystycznych - 4&nbsp; Przegląd miar dopasowania modelu</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./infer.html" rel="prev">
<link href="./cover.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Brak wyników",
    "search-matching-documents-text": "dopasowane dokumenty",
    "search-copy-link-title": "Kopiuj link do wyszukiwania",
    "search-hide-matches-text": "Ukryj dodatkowe dopasowania",
    "search-more-match-text": "więcej dopasowań w tym dokumencie",
    "search-more-matches-text": "więcej dopasowań w tym dokumencie",
    "search-clear-button-title": "Wyczyść",
    "search-detached-cancel-button-title": "Anuluj",
    "search-submit-button-title": "Zatwierdź"
  }
}</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">
<span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Przegląd miar dopasowania modelu</span>
</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Metody walidacji modeli statystycznych</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com" title="" class="sidebar-tool px-1"><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/dax44/ModelsValidation/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Download" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-download"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Metody-walidacji-modeli-statystycznych.pdf">
            <i class="bi bi-bi-file-pdf pe-1"></i>
          Download PDF
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Metody-walidacji-modeli-statystycznych.epub">
            <i class="bi bi-bi-journal pe-1"></i>
          Download ePub
          </a>
        </li>
    </ul>
<a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Wprowadzenie</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Ekosystem</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modeling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Modelowanie statystyczne</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./infer.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Modele inferencyjne</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./measures.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Przegląd miar dopasowania modelu</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Spis treści</h2>
   
  <ul>
<li>
<a href="#miary-dopasowania-modeli-regresyjnych" id="toc-miary-dopasowania-modeli-regresyjnych" class="nav-link active" data-scroll-target="#miary-dopasowania-modeli-regresyjnych"><span class="toc-section-number">4.1</span>  Miary dopasowania modeli regresyjnych</a>
  <ul class="collapse">
<li><a href="#r2" id="toc-r2" class="nav-link" data-scroll-target="#r2"><span class="toc-section-number">4.1.1</span>  <span class="math inline">\(R^2\)</span></a></li>
  <li><a href="#rmse" id="toc-rmse" class="nav-link" data-scroll-target="#rmse"><span class="toc-section-number">4.1.2</span>  RMSE</a></li>
  <li><a href="#mse" id="toc-mse" class="nav-link" data-scroll-target="#mse"><span class="toc-section-number">4.1.3</span>  MSE</a></li>
  <li><a href="#mae" id="toc-mae" class="nav-link" data-scroll-target="#mae"><span class="toc-section-number">4.1.4</span>  MAE</a></li>
  <li><a href="#mape" id="toc-mape" class="nav-link" data-scroll-target="#mape"><span class="toc-section-number">4.1.5</span>  MAPE</a></li>
  <li><a href="#mase" id="toc-mase" class="nav-link" data-scroll-target="#mase"><span class="toc-section-number">4.1.6</span>  MASE</a></li>
  <li><a href="#mpe" id="toc-mpe" class="nav-link" data-scroll-target="#mpe"><span class="toc-section-number">4.1.7</span>  MPE</a></li>
  <li><a href="#msd" id="toc-msd" class="nav-link" data-scroll-target="#msd"><span class="toc-section-number">4.1.8</span>  MSD</a></li>
  <li><a href="#funkcja-straty-hubera" id="toc-funkcja-straty-hubera" class="nav-link" data-scroll-target="#funkcja-straty-hubera"><span class="toc-section-number">4.1.9</span>  Funkcja straty Hubera</a></li>
  <li><a href="#funkcja-straty-pseudo-hubera" id="toc-funkcja-straty-pseudo-hubera" class="nav-link" data-scroll-target="#funkcja-straty-pseudo-hubera"><span class="toc-section-number">4.1.10</span>  Funkcja straty Pseudo-Hubera</a></li>
  <li><a href="#logarytm-funkcji-straty-dla-rozk%C5%82adu-poissona" id="toc-logarytm-funkcji-straty-dla-rozkładu-poissona" class="nav-link" data-scroll-target="#logarytm-funkcji-straty-dla-rozk%C5%82adu-poissona"><span class="toc-section-number">4.1.11</span>  Logarytm funkcji straty dla rozkładu Poissona</a></li>
  <li><a href="#smape" id="toc-smape" class="nav-link" data-scroll-target="#smape"><span class="toc-section-number">4.1.12</span>  SMAPE</a></li>
  <li><a href="#rpd" id="toc-rpd" class="nav-link" data-scroll-target="#rpd"><span class="toc-section-number">4.1.13</span>  RPD</a></li>
  <li><a href="#rpiq" id="toc-rpiq" class="nav-link" data-scroll-target="#rpiq"><span class="toc-section-number">4.1.14</span>  RPIQ</a></li>
  <li><a href="#ccc" id="toc-ccc" class="nav-link" data-scroll-target="#ccc"><span class="toc-section-number">4.1.15</span>  CCC</a></li>
  <li><a href="#podsumowanie-miar-dla-modeli-regresyjnych" id="toc-podsumowanie-miar-dla-modeli-regresyjnych" class="nav-link" data-scroll-target="#podsumowanie-miar-dla-modeli-regresyjnych"><span class="toc-section-number">4.1.16</span>  Podsumowanie miar dla modeli regresyjnych</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/dax44/ModelsValidation/issues/new" class="toc-action">Zgłoś problem</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title d-none d-lg-block">
<span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Przegląd miar dopasowania modelu</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><blockquote class="blockquote">
<p><em>Wszystkie modele są błędne, ale niektóre są przydatne</em> - George E.P. Box</p>
</blockquote>
<p>Ocenę jakości dopasowania modelu można dokonywać na różne sposoby:</p>
<ul>
<li>porównując przewidywaną klasę lub wartość na podstawie modelu z obserwowaną prawdziwą klasą lub wartością;</li>
<li>korzystając z ilustracji graficznej przedstawiając np. na osi odciętych wartości przewidywane na podstawie modelu, a na osi rzędnych wartości obserwowane w danych<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>; choć można się też spotkać z innymi wykresami, jak np. krzywe <em>ROC</em>, czy <em>Precision-Recall</em>;</li>
<li>przedstawić klasyfikację w postaci macierzy błędnych klasyfikacji (ang. <em>confusion matrix</em>);</li>
<li>najczęściej można się jednak spotkać z podejściem wykorzystującym różnego rodzaju miarami dopasowania modelu.</li>
</ul>
<div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;dotyczy to modeli regresyjnych</p></li></div><div class="page-columns page-full"><p>W tym rozdziale przedstawimy najpowszechniej stosowane miary dopasowania modelu w podziale na modele regresyjne i klasyfikacyjne. Przy czym w rodzinie modeli klasyfikacyjnych można wyszczególnić podklasę modeli, dla których zmienna wynikowa jest binarna. Modele ze zmienną wynikową binarną stanowią oddzielną klasę w kontekście dopasowania, ponieważ stosuje się wówczas inne miary dopasowania. Co prawda miary te można zastosować również w przypadku zmiennej wynikowej o większej liczbie kategorii<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, ale wymaga to wówczas przyjęcia dodatkowych umów w jaki sposób je stosować, a sposoby te nie są jednoznaczne.</p><div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;czyli większej niż dwie</p></li></div></div>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="https://thumbs.gfycat.com/AdorableElegantGreatargus-max-1mb.gif" class="img-fluid"></p>
</div></div><section id="miary-dopasowania-modeli-regresyjnych" class="level2 page-columns page-full" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="miary-dopasowania-modeli-regresyjnych">
<span class="header-section-number">4.1</span> Miary dopasowania modeli regresyjnych</h2>
<p>Przegląd zaczniemy od najlepiej znanych miar, a skończymy na rzadziej stosowanych, jak funkcja straty Hubera.</p>
<section id="r2" class="level3 page-columns page-full" data-number="4.1.1"><h3 data-number="4.1.1" class="anchored" data-anchor-id="r2">
<span class="header-section-number">4.1.1</span> <span class="math inline">\(R^2\)</span>
</h3>
<p>Miara stosowana najczęściej do oceny dopasowania modeli liniowych, a definiowana jako:</p>
<p><span id="eq-r2trad"><span class="math display">\[
R^2=1-\frac{\sum_i(y_i-\hat{y}_i)^2}{\sum_i(y_i-\bar{y})^2},
\tag{4.1}\]</span></span></p>
<div class="page-columns page-full"><p>gdzie <span class="math inline">\(\hat{y}_i\)</span> jest <span class="math inline">\(i\)</span>-tą wartością przewidywaną na podstawie modelu, <span class="math inline">\(\bar{y}\)</span> jest średnią zmiennej wynikowej, a <span class="math inline">\(y_i\)</span> jest <span class="math inline">\(i\)</span>-tą wartością obserwowaną. Już na kursie modeli liniowych dowiedzieliśmy się o wadach tak zdefiniowanej miary. Wśród nich należy wymienić przede wszystkim fakt, iż dołączając do modelu zmienne, których zdolność predykcyjna jest nieistotna<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, to i tak rośnie <span class="math inline">\(R^2\)</span></p><div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp;czyli nie mają znaczenia w przewidywaniu wartości wynikowej</p></li></div></div>
<div class="page-columns page-full"><p>W przypadku modeli liniowych wprowadzaliśmy korektę eliminującą tą wadę, jednak w przypadku modeli predykcyjnych skorygowana miara <span class="math inline">\(R^2_{adj}\)</span> nie wystarcza. W sytuacji gdy modele mają bardzo słabą moc predykcyjną, czyli są np. drzewem regresyjnym bez żadnej reguły podziału<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, wówczas można otrzymać ujemne wartości obu miar. Zaleca się zatem wprowadzenie miary, która pozbawiona jest tej wady, a jednocześnie ma tą sama interpretację. Definiuję się ją następująco:</p><div class="no-row-height column-margin column-container"><li id="fn4"><p><sup>4</sup>&nbsp;drzewo składa się tylko z korzenia</p></li></div></div>
<p><span id="eq-r2cor"><span class="math display">\[
\tilde{R}^2=[\operatorname{Cor}(Y, \hat{Y})]^2.
\tag{4.2}\]</span></span></p>
<div class="page-columns page-full"><p>Miara zdefiniowana w (<a href="#eq-r2cor"><span>4.2</span></a>) zapewnia nam wartości w przedziale (0,1), a klasyczna miara (<a href="#eq-r2trad"><span>4.1</span></a>) nie<span class="citation" data-cites="kvalsethCautionaryNoteR21985">(<a href="references.html#ref-kvalsethCautionaryNoteR21985" role="doc-biblioref">Kvalseth 1985</a>)</span>. Tradycyjna jest zdefiniowana w bibliotece <code>yardstick</code><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> pod nazwą <code>rsq_trad</code>, natomiast miara oparta na korelacji jako <code>rsq</code>. Oczywiście interpretacja jest następująca, że jeśli wartość <span class="math inline">\(\tilde{R}^2\)</span> jest bliska 1, to model jest dobrze dopasowany, a bliskie 0 oznacza słabe dopasowanie.</p><div class="no-row-height column-margin column-container"><li id="fn5"><p><sup>5</sup>&nbsp;będącej częścią ekosystemu <code>tidymodels</code></p></li></div></div>
</section><section id="rmse" class="level3" data-number="4.1.2"><h3 data-number="4.1.2" class="anchored" data-anchor-id="rmse">
<span class="header-section-number">4.1.2</span> RMSE</h3>
<p>Inną powszechnie stosowaną miarą do oceny dopasowania modeli regresyjnych jest pierwiastek błędu średnio-kwadratowego (ang. <em>Root Mean Square Error</em>), zdefiniowany następująco:</p>
<p><span id="eq-rmse"><span class="math display">\[
RMSE = \sqrt{\frac{\sum_{i=1}^n(y_i-\hat{y}_i)^2}{n}},
\tag{4.3}\]</span></span></p>
<p>gdzie <span class="math inline">\(n\)</span> oznacza liczebność zbioru danych na jakim dokonywana jest ocena dopasowania. Im mniejsza jest wartość błędu RMSE tym lepiej dopasowany jest model. Niestety wadą tej miary jest brak odporności na wartości odstające. Błąd w tym przypadku jest mierzony w tych samych jednostkach co mierzona wielkość wynikowa <span class="math inline">\(Y\)</span>. Do wywołania jej używamy funkcji <code>rmse</code>.</p>
</section><section id="mse" class="level3 page-columns page-full" data-number="4.1.3"><h3 data-number="4.1.3" class="anchored" data-anchor-id="mse">
<span class="header-section-number">4.1.3</span> MSE</h3>
<p>Ściśle powiązaną miarą dopasowania modelu z RMSE jest błąd średnio-kwadratowy (ang. <em>Mean Square Error</em>). Oczywiście jest on definiowany jako kwadrat RMSE. Interpretacja jest podobna jak w przypadku RMSE. W tym przypadku błąd jest mierzony w jednostkach do kwadratu i również jak w przypadku RMSE miara ta jest wrażliwa na wartości odstające. Wywołujemy ją funkcją <code>mse</code>.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="https://media.tenor.com/qsthhHhdjsQAAAAd/error-windows.gif" class="img-fluid"></p>
</div></div></section><section id="mae" class="level3" data-number="4.1.4"><h3 data-number="4.1.4" class="anchored" data-anchor-id="mae">
<span class="header-section-number">4.1.4</span> MAE</h3>
<p>Chcąc uniknąć (choćby w części) wrażliwości na wartości odstające stosuje się miarę średniego absolutnego błędu (ang. <em>Mean Absolut Error</em>). Definiujemy go następująco:</p>
<p><span id="eq-mae"><span class="math display">\[
MAE=\frac{\sum_{i=1}^n\vert y_i-\hat{y}_i\vert}{n}.
\tag{4.4}\]</span></span></p>
<p>Ponieważ wartości błędów <span class="math inline">\(y_i-\hat{y}_i\)</span> nie są podnoszone do kwadratu, to miara ta jest mniej wrażliwa na punkty odstające. Interpretacja jej jest podobna jak MSE i RMSE. Do wywołania jej używamy funkcji <code>mae</code>. Błąd w tym przypadku jest również mierzony w tych samych jednostkach co <span class="math inline">\(Y\)</span>.</p>
<p>Wymienione miary błędów są nieunormowane, a dopasowania modeli możemy dokonywać jedynie porównując wynik błędu z wartościami <span class="math inline">\(Y\)</span>, lub też przez porównanie miar dla różnych modeli.</p>
</section><section id="mape" class="level3" data-number="4.1.5"><h3 data-number="4.1.5" class="anchored" data-anchor-id="mape">
<span class="header-section-number">4.1.5</span> MAPE</h3>
<p>Średni bezwzględny błąd procentowy (ang. <em>Mean Absolute Percentage Error</em>) jest przykładem miary błędu wyrażanego w procentach. Definiuje się go następująco:</p>
<p><span id="eq-mape"><span class="math display">\[
MAPE=\frac{1}{n}\sum_{i=1}^n\left|\frac{y_i-\hat{y}_i}{y_i}\right|\cdot 100\%.
\tag{4.5}\]</span></span></p>
<p>Interpretujemy ten błąd podobnie jak poprzednie pomimo, że jest wyrażony w procentach. Do wywołania go w pakiecie <code>yardstick</code> używamy funkcji <code>mape</code>.</p>
</section><section id="mase" class="level3" data-number="4.1.6"><h3 data-number="4.1.6" class="anchored" data-anchor-id="mase">
<span class="header-section-number">4.1.6</span> MASE</h3>
<p>Średni bezwzględny błąd skalowany (ang. <em>Mean Absolute Scaled Error</em>) jest miarą dokładności prognoz. Została zaproponowana w 2005 roku przez statystyka Roba J. Hyndmana i profesora Anne B. Koehler, którzy opisali ją jako “ogólnie stosowaną miarę dokładności prognoz bez problemów widocznych w innych miarach.”<span class="citation" data-cites="hyndmanAnotherLookMeasures2006">(<a href="references.html#ref-hyndmanAnotherLookMeasures2006" role="doc-biblioref">Hyndman i Koehler 2006</a>)</span> Średni bezwzględny błąd skalowany ma korzystne właściwości w porównaniu z innymi metodami obliczania błędów prognoz, takimi jak RMSE, i dlatego jest zalecany do określania dokładności prognoz w szeregach czasowych.<span class="citation" data-cites="fransesNoteMeanAbsolute2016">(<a href="references.html#ref-fransesNoteMeanAbsolute2016" role="doc-biblioref">Franses 2016</a>)</span> Definiujemy go następująco</p>
<p><span id="eq-mase"><span class="math display">\[
MASE = \frac{\sum_{i=1}^n\vert y_i-\hat{y}_i\vert}{\sum_{i=1}^n\vert y_i-\bar{y}_i\vert}.
\tag{4.6}\]</span></span></p>
<p>Dla szeregów czasowych z sezonowością i bez sezonowości definiuje się go jeszcze nieco inaczej<span class="citation" data-cites="hyndmanAnotherLookMeasures2006 EvaluatingForecastAccuracy">(<a href="references.html#ref-hyndmanAnotherLookMeasures2006" role="doc-biblioref">Hyndman i Koehler 2006</a>; <a href="references.html#ref-EvaluatingForecastAccuracy" role="doc-biblioref"><em>3.4 <span>Evaluating</span> Forecast Accuracy | <span>Forecasting</span>: <span>Principles</span> and <span>Practice</span> (2nd Ed)</em>, b.d.</a>)</span> Oczywiście interpretacja jest też podobna jak w przypadku innych miar błędów. Wywołujemy go funkcją <code>mase</code>.</p>
</section><section id="mpe" class="level3" data-number="4.1.7"><h3 data-number="4.1.7" class="anchored" data-anchor-id="mpe">
<span class="header-section-number">4.1.7</span> MPE</h3>
<p>Średni błąd procentowy (ang. <em>Mean Percentage Error</em>) jest miarą błędu względnego definiowaną nastepująco</p>
<p><span id="eq-mpe"><span class="math display">\[
MPE = \frac{1}{n}\sum_{i=1}^n\frac{y_i-\hat{y}_i}{y_i}.
\tag{4.7}\]</span></span></p>
<p>Ponieważ we wzorze wykorzystywane są rzeczywiste, a nie bezwzględne wartości błędów prognozy, dodatnie i ujemne błędy prognozy mogą się wzajemnie kompensować. W rezultacie wzór ten można wykorzystać jako miarę błędu systematycznego w prognozach. Wadą tej miary jest to, że jest ona nieokreślona zawsze, gdy pojedyncza wartość rzeczywista wynosi zero. Wywołujemy ją za pomocą <code>mpe</code>.</p>
</section><section id="msd" class="level3" data-number="4.1.8"><h3 data-number="4.1.8" class="anchored" data-anchor-id="msd">
<span class="header-section-number">4.1.8</span> MSD</h3>
<p>Średnia znakowa różnic (ang. <em>Mean Signed Deviation</em>), znana również jako średnie odchylenie znakowe i średni błąd znakowy, jest statystyką próbkową, która podsumowuje, jak dobrze szacunki <span class="math inline">\(\hat{Y}\)</span> pasują do wielkości obserwowanych <span class="math inline">\(Y\)</span>. Definiujemy ją następująco:</p>
<p><span id="eq-msd"><span class="math display">\[
MSD = \frac{1}{n}\sum_{i=1}^n(\hat{y}_i-y_i).
\tag{4.8}\]</span></span></p>
<p>Interpretacja podobnie jak w przypadku innych błędów i mniej wynosi miara tym lepiej dopasowany model. Wywołujemy go funkcją <code>msd</code>.</p>
<p>Istnieje cały szereg miar specjalistycznych rzadziej stosowanych w zagadnieniach regresyjnych. Wśród nich należy wymienić</p>
</section><section id="funkcja-straty-hubera" class="level3" data-number="4.1.9"><h3 data-number="4.1.9" class="anchored" data-anchor-id="funkcja-straty-hubera">
<span class="header-section-number">4.1.9</span> Funkcja straty Hubera</h3>
<p>Funkcja straty Hubera (ang. <em>Huber loss</em>) jest nieco bardziej odporną na punkty odstające niż RMSE miarą błędu. Definiujemy ją następująco:</p>
<p><span id="eq-huber"><span class="math display">\[
L_{\delta}(y, \hat{y})= \begin{cases}
  \frac12 (y_i-\hat{y}_i)^2, &amp;\text{ jeśli }\vert y_i-\hat{y}_i\vert\leq\delta\\
  \delta\cdot \vert y_i-\hat{y}_i\vert-\tfrac12\delta, &amp;\text{ w przeciwnym przypadku}.
\end{cases}
\tag{4.9}\]</span></span> W implementacji <code>yardstick</code> <span class="math inline">\(\delta=1\)</span> natomiast wyliczanie funkcji straty następuje przez uśrednienie po wszystkih obserwacjach. Z definicji widać, że funkcja straty Hubera jest kombinacją MSE i odpowiednio przekształconej miary MAE, w zależności od tego czy predykcja znacząco odbiegaja od obserwowanych wartości. Wywołujemy ją przez funkcję <code>huber_loss</code>.</p>
</section><section id="funkcja-straty-pseudo-hubera" class="level3 page-columns page-full" data-number="4.1.10"><h3 data-number="4.1.10" class="anchored" data-anchor-id="funkcja-straty-pseudo-hubera">
<span class="header-section-number">4.1.10</span> Funkcja straty Pseudo-Hubera</h3>
<div class="page-columns page-full"><p>Funkcja straty Pseudo-Hubera (ang. <em>Pseudo-Huber loss</em>) może być stosowana jako gładkie przybliżenie funkcji straty Hubera. Łączy ona najlepsze właściwości straty kwadratowej<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> i straty bezwzględnej<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>, będąc silnie wypukłą, gdy znajduje się blisko celu (minimum) i mniej stromą dla wartości ekstremalnych . Skala, przy której funkcja straty Pseudo-Hubera przechodzi od straty L2 dla wartości bliskich minimum do straty L1 może być kontrolowana przez parametr <span class="math inline">\(\delta\)</span>. Funkcja straty Pseudo-Hubera zapewnia, że pochodne są ciągłe dla wszystkich stopni . Definiujemy ją następująco :</p><div class="no-row-height column-margin column-container"><li id="fn6"><p><sup>6</sup>&nbsp;inaczej w normie L2</p></li><li id="fn7"><p><sup>7</sup>&nbsp;w normie L1</p></li></div></div>
<p><span id="eq-huber2"><span class="math display">\[
L_{\delta}(y-\hat{y})=\delta^2\left(\sqrt{1+((y-\hat{y})/\delta)^2}-1\right).
\tag{4.10}\]</span></span> Wywołujemy ją za pomocą funkcji <code>huber_loss_pseudo</code>.</p>
</section><section id="logarytm-funkcji-straty-dla-rozkładu-poissona" class="level3" data-number="4.1.11"><h3 data-number="4.1.11" class="anchored" data-anchor-id="logarytm-funkcji-straty-dla-rozkładu-poissona">
<span class="header-section-number">4.1.11</span> Logarytm funkcji straty dla rozkładu Poissona</h3>
<p>Logarytm funkcji straty dla rozkładu Poissona (ang. <em>Mean log-loss for Poisson data</em>) definiowany jest w następujący sposób:</p>
<p><span class="math display">\[
\mathcal{L}=\frac1n\sum_{i=11}^n(\hat{y}_i-y_i\cdot \ln(\hat{y}_i)).
\]</span></p>
<p>Wywołujemy go funkcją <code>poisson_log_los</code>.</p>
</section><section id="smape" class="level3" data-number="4.1.12"><h3 data-number="4.1.12" class="anchored" data-anchor-id="smape">
<span class="header-section-number">4.1.12</span> SMAPE</h3>
<p>Symetryczny średni bezwzględny błąd procentowy (ang. <em>Symmetric Mean Absolute Percentage Error</em>) jest miarą dokładności opartą na błędach procentowych (lub względnych). Definiujemy ją następująco:</p>
<p><span id="eq-smape"><span class="math display">\[
SMAPE = \frac1n\sum_{i=1}^n\frac{\vert y_i-\hat{y}_i\vert}{(|y_i|+|\hat{y}_i|)/2}\cdot100\%.
\tag{4.11}\]</span></span></p>
<p>Wywołujemy go funkcją <code>smape</code>.</p>
</section><section id="rpd" class="level3" data-number="4.1.13"><h3 data-number="4.1.13" class="anchored" data-anchor-id="rpd">
<span class="header-section-number">4.1.13</span> RPD</h3>
<p>Stosunek wydajności do odchylenia standardowego (ang. <em>Ratio of Performance to Deviation</em>) definiujemy jako</p>
<p><span id="eq-rpd"><span class="math display">\[
RPD = \frac{SD}{RMSE},
\tag{4.12}\]</span></span></p>
<p>gdzie <span class="math inline">\(SD\)</span> oczywiście oznacza odchylenie standardowe zmiennej zależnej. Tym razem interpretujemy go w ten sposób, że im wyższa jest wartość RPD tym lepiej dopasowany model. Wywołujemy za pomocą <code>rpd</code>.</p>
<p>W szczególności w dziedzinie spektroskopii, stosunek wydajności do odchylenia (RPD) został użyty jako standardowy sposób raportowania jakości modelu. Jest to stosunek odchylenia standardowego zmiennej do błędu standardowego przewidywania tej zmiennej przez dany model. Jednak jego systematyczne stosowanie zostało skrytykowane przez kilku autorów, ponieważ użycie odchylenia standardowego do reprezentowania rozrzutu zmiennej może być niewłaściwe w przypadku skośnych zbiorów danych. Stosunek wydajności do rozstępu międzykwartylowego został wprowadzony przez <span class="citation" data-cites="bellon-maurelCriticalReviewChemometric2010">Bellon-Maurel i in. (<a href="references.html#ref-bellon-maurelCriticalReviewChemometric2010" role="doc-biblioref">2010</a>)</span> w celu rozwiązania niektórych z tych problemów i uogólnienia RPD na zmienne o rozkładzie nienormalnym.</p>
</section><section id="rpiq" class="level3" data-number="4.1.14"><h3 data-number="4.1.14" class="anchored" data-anchor-id="rpiq">
<span class="header-section-number">4.1.14</span> RPIQ</h3>
<p>Stosunek wartości do rozstępu międzykwartylowego (ang. <em>Ratio of Performance to Inter-Quartile</em>) definiujemy następująco:</p>
<p><span id="eq-rpiq"><span class="math display">\[
RPIQ = \frac{IQ}{RMSE},
\tag{4.13}\]</span></span></p>
<p>gdzie <span class="math inline">\(IQ\)</span> oznacza rozstęp kwartylowy zmiennej zależnej. Wywołujemy go przez funkcję <code>rpiq.</code></p>
</section><section id="ccc" class="level3" data-number="4.1.15"><h3 data-number="4.1.15" class="anchored" data-anchor-id="ccc">
<span class="header-section-number">4.1.15</span> CCC</h3>
<p>Korelacyjny współczynnik zgodności (ang. <em>Concordance Correlation Coefficient</em>) mierzy zgodność pomiędzy wartościami predykcji i obserwowanymi. Definiujemy go w następujący sposób:</p>
<p><span class="math display">\[
CCC = \frac{2\rho\sigma_y\sigma_{\hat{y}}}{\sigma^2_{y}+\sigma^2_{\hat{y}}+(\mu_y-\mu_{\hat{y}})^2},
\]</span></p>
<p>gdzie <span class="math inline">\(\mu_y,\mu_{\hat{y}}\)</span> oznaczają średnią wartości obserwowanych i przewidywanych odpowiednio, <span class="math inline">\(\sigma_{y},\sigma_{\hat{y}}\)</span> stanowią natomiast odchylenia standardowe tych wielkości. <span class="math inline">\(\rho\)</span> jest współczynnikiem korelacji pomiędzy <span class="math inline">\(Y\)</span> i <span class="math inline">\(\hat{Y}\)</span>. Wywołanie w R to funkcja <code>ccc</code>.</p>
</section><section id="podsumowanie-miar-dla-modeli-regresyjnych" class="level3 page-columns page-full" data-number="4.1.16"><h3 data-number="4.1.16" class="anchored" data-anchor-id="podsumowanie-miar-dla-modeli-regresyjnych">
<span class="header-section-number">4.1.16</span> Podsumowanie miar dla modeli regresyjnych</h3>
<p>Wśród miar dopasowania modelu można wyróżnić, te które mierzą zgodność pomiędzy wartościami obserwowanymi a przewidywanymi, wyrażone często pewnego rodzaju korelacjami (lub ich kwadratami), a interpretujemy je w ten sposób, że im wyższe wartości tych współczynników tym bardziej zgodne są predykcje z obserwacjami. Drugą duża grupę miar stanowią błędy (bezwzględne i względne), które mierzą w różny sposób różnice pomiędzy wartościami obserwowanymi i przewidywanymi. Jedne są bardziej odporne wartości odstające inne mniej, a wszystkie interpretujemy tak, że jeśli ich wartość jest mniejsza tym lepiej jest dopasowany model.</p>
<div id="exm-1" class="theorem example">
<p><span class="theorem-title"><strong>Przykład 4.1 </strong></span>Dla zilustrowania działania wspomnianych miar przeanalizujemy przykład modelu regresyjnego. Dla przykładu rozwiążemy zadanie przewidywania wytrzymałości betonu na podstawie jego parametrów. Do tego celu użyjemy danych ze zbioru <code>concrete</code> pakietu <code>modeldata</code>.<span class="citation" data-cites="yehAnalysisStrengthConcrete2006">(<a href="references.html#ref-yehAnalysisStrengthConcrete2006" role="doc-biblioref">Yeh 2006</a>)</span></p>
<div class="cell">
<details><summary>Kod</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># charakterystyka danych</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">concrete</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,030
Columns: 9
$ cement               &lt;dbl&gt; 540.0, 540.0, 332.5, 332.5, 198.6, 266.0, 380.0, …
$ blast_furnace_slag   &lt;dbl&gt; 0.0, 0.0, 142.5, 142.5, 132.4, 114.0, 95.0, 95.0,…
$ fly_ash              &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ water                &lt;dbl&gt; 162, 162, 228, 228, 192, 228, 228, 228, 228, 228,…
$ superplasticizer     &lt;dbl&gt; 2.5, 2.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,…
$ coarse_aggregate     &lt;dbl&gt; 1040.0, 1055.0, 932.0, 932.0, 978.4, 932.0, 932.0…
$ fine_aggregate       &lt;dbl&gt; 676.0, 676.0, 594.0, 594.0, 825.5, 670.0, 594.0, …
$ age                  &lt;int&gt; 28, 28, 270, 365, 360, 90, 365, 28, 28, 28, 90, 2…
$ compressive_strength &lt;dbl&gt; 79.99, 61.89, 40.27, 41.05, 44.30, 47.03, 43.70, …</code></pre>
</div>
<details><summary>Kod</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># modelowania dokonamy bez szczególnego uwzględnienia charakteru zmiennych,</span></span>
<span><span class="co"># tuningowania i innych czynności, które będą nam towarzyszyć w normalnej</span></span>
<span><span class="co"># budowie modelu</span></span>
<span></span>
<span><span class="co"># podział danych na uczące i testowe</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">44</span><span class="op">)</span></span>
<span><span class="va">split</span> <span class="op">&lt;-</span> <span class="fu">initial_split</span><span class="op">(</span>data <span class="op">=</span> <span class="va">concrete</span>,</span>
<span>                       prop <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span>
<span><span class="va">train_data</span> <span class="op">&lt;-</span> <span class="fu">training</span><span class="op">(</span><span class="va">split</span><span class="op">)</span></span>
<span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu">testing</span><span class="op">(</span><span class="va">split</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># określenie modeli, wybrałem kNN</span></span>
<span><span class="va">knn5</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">nearest_neighbor</span><span class="op">(</span>neighbors <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">set_engine</span><span class="op">(</span><span class="st">'kknn'</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">set_mode</span><span class="op">(</span><span class="st">'regression'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">knn25</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">nearest_neighbor</span><span class="op">(</span>neighbors <span class="op">=</span> <span class="fl">25</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">set_engine</span><span class="op">(</span><span class="st">'kknn'</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">set_mode</span><span class="op">(</span><span class="st">'regression'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># uczymy modele</span></span>
<span><span class="va">fit5</span> <span class="op">&lt;-</span> <span class="va">knn5</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">fit</span><span class="op">(</span><span class="va">compressive_strength</span><span class="op">~</span><span class="va">.</span>, data <span class="op">=</span> <span class="va">train_data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit25</span> <span class="op">&lt;-</span> <span class="va">knn25</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">fit</span><span class="op">(</span><span class="va">compressive_strength</span><span class="op">~</span><span class="va">.</span>, data <span class="op">=</span> <span class="va">train_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obliczamy predykcję dla obu modeli na obu zbiorach</span></span>
<span><span class="va">pred_train5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">fit5</span>, <span class="va">train_data</span><span class="op">)</span></span>
<span><span class="va">pred_train25</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">fit25</span>, <span class="va">train_data</span><span class="op">)</span></span>
<span><span class="va">pred_test5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">fit5</span>, <span class="va">test_data</span><span class="op">)</span></span>
<span><span class="va">pred_test25</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">fit25</span>, <span class="va">test_data</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Kod</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">bind_cols</span><span class="op">(</span>obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">train_data</span><span class="op">$</span><span class="va">compressive_strength</span>, <span class="va">test_data</span><span class="op">$</span><span class="va">compressive_strength</span><span class="op">)</span>,</span>
<span>          pred5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred_train5</span><span class="op">$</span><span class="va">.pred</span>, <span class="va">pred_test5</span><span class="op">$</span><span class="va">.pred</span><span class="op">)</span>,</span>
<span>          pred25 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred_train25</span><span class="op">$</span><span class="va">.pred</span>, <span class="va">pred_test25</span><span class="op">$</span><span class="va">.pred</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"train"</span>, <span class="st">"test"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">train_data</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">test_data</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred5</span>, <span class="va">pred25</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"model"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"pred"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>model <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">model</span> <span class="op">==</span> <span class="st">"pred5"</span> <span class="op">~</span> <span class="st">"knn5"</span>,</span>
<span>    <span class="va">model</span> <span class="op">==</span> <span class="st">"pred25"</span> <span class="op">~</span> <span class="st">"knn25"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">obs</span>, y <span class="op">=</span> <span class="va">pred</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_abline</span><span class="op">(</span>intercept <span class="op">=</span> <span class="fl">0</span>, </span>
<span>              slope <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">facet_grid</span><span class="op">(</span><span class="va">sample</span><span class="op">~</span><span class="va">model</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">coord_obs_pred</span><span class="op">(</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div id="fig-por1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="measures_files/figure-html/fig-por1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Rysunek&nbsp;4.1: Graficzne porównanie obu modeli na obu zbiorach</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details><summary>Kod</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># podsumowanie za pomocą miary R2</span></span>
<span><span class="fu">bind_cols</span><span class="op">(</span>obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">train_data</span><span class="op">$</span><span class="va">compressive_strength</span>, <span class="va">test_data</span><span class="op">$</span><span class="va">compressive_strength</span><span class="op">)</span>,</span>
<span>          pred5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred_train5</span><span class="op">$</span><span class="va">.pred</span>, <span class="va">pred_test5</span><span class="op">$</span><span class="va">.pred</span><span class="op">)</span>,</span>
<span>          pred25 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred_train25</span><span class="op">$</span><span class="va">.pred</span>, <span class="va">pred_test25</span><span class="op">$</span><span class="va">.pred</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"train"</span>, <span class="st">"test"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">train_data</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">test_data</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred5</span>, <span class="va">pred25</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"model"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"pred"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">model</span>, <span class="va">sample</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">rsq</span><span class="op">(</span>truth <span class="op">=</span> <span class="va">obs</span>, estimate <span class="op">=</span> <span class="va">pred</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  model  sample .metric .estimator .estimate
  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 pred25 test   rsq     standard       0.645
2 pred25 train  rsq     standard       0.787
3 pred5  test   rsq     standard       0.737
4 pred5  train  rsq     standard       0.929</code></pre>
</div>
<details><summary>Kod</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># można też podsumować od razu kilkoma miarami</span></span>
<span><span class="co"># będa miary domyślne dla modelu regresyjnego</span></span>
<span><span class="fu">bind_cols</span><span class="op">(</span>obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">train_data</span><span class="op">$</span><span class="va">compressive_strength</span>, <span class="va">test_data</span><span class="op">$</span><span class="va">compressive_strength</span><span class="op">)</span>,</span>
<span>          pred5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred_train5</span><span class="op">$</span><span class="va">.pred</span>, <span class="va">pred_test5</span><span class="op">$</span><span class="va">.pred</span><span class="op">)</span>,</span>
<span>          pred25 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred_train25</span><span class="op">$</span><span class="va">.pred</span>, <span class="va">pred_test25</span><span class="op">$</span><span class="va">.pred</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"train"</span>, <span class="st">"test"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">train_data</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">test_data</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred5</span>, <span class="va">pred25</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"model"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"pred"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">model</span>, <span class="va">sample</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">metrics</span><span class="op">(</span>truth <span class="op">=</span> <span class="va">obs</span>, estimate <span class="op">=</span> <span class="va">pred</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">model</span>, <span class="va">.metric</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 5
   model  sample .metric .estimator .estimate
   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
 1 pred25 test   mae     standard       7.73 
 2 pred25 train  mae     standard       6.50 
 3 pred25 test   rmse    standard       9.74 
 4 pred25 train  rmse    standard       8.22 
 5 pred25 test   rsq     standard       0.645
 6 pred25 train  rsq     standard       0.787
 7 pred5  test   mae     standard       6.33 
 8 pred5  train  mae     standard       3.45 
 9 pred5  test   rmse    standard       8.26 
10 pred5  train  rmse    standard       4.68 
11 pred5  test   rsq     standard       0.737
12 pred5  train  rsq     standard       0.929</code></pre>
</div>
<details><summary>Kod</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># możemy zmienić parametry niektórych miar</span></span>
<span><span class="va">huber_loss2</span> <span class="op">&lt;-</span> <span class="fu">metric_tweak</span><span class="op">(</span><span class="st">"huber_loss2"</span>, <span class="va">huber_loss</span>, delta <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># można również wybrać jakie miary zostana użyte</span></span>
<span><span class="va">selected_metrics</span> <span class="op">&lt;-</span> <span class="fu">metric_set</span><span class="op">(</span><span class="va">ccc</span>, <span class="va">rpd</span>, <span class="va">mape</span>, <span class="va">huber_loss2</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">bind_cols</span><span class="op">(</span>obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">train_data</span><span class="op">$</span><span class="va">compressive_strength</span>, <span class="va">test_data</span><span class="op">$</span><span class="va">compressive_strength</span><span class="op">)</span>,</span>
<span>          pred5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred_train5</span><span class="op">$</span><span class="va">.pred</span>, <span class="va">pred_test5</span><span class="op">$</span><span class="va">.pred</span><span class="op">)</span>,</span>
<span>          pred25 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred_train25</span><span class="op">$</span><span class="va">.pred</span>, <span class="va">pred_test25</span><span class="op">$</span><span class="va">.pred</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"train"</span>, <span class="st">"test"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">train_data</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">test_data</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pred5</span>, <span class="va">pred25</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"model"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"pred"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">model</span>, <span class="va">sample</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">selected_metrics</span><span class="op">(</span>truth <span class="op">=</span> <span class="va">obs</span>, estimate <span class="op">=</span> <span class="va">pred</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">model</span>, <span class="va">sample</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 5
   model  sample .metric     .estimator .estimate
   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;
 1 pred25 test   ccc         standard       0.750
 2 pred25 test   rpd         standard       1.64 
 3 pred25 test   mape        standard      30.9  
 4 pred25 test   huber_loss2 standard      13.6  
 5 pred25 train  ccc         standard       0.851
 6 pred25 train  rpd         standard       2.07 
 7 pred25 train  mape        standard      24.8  
 8 pred25 train  huber_loss2 standard      11.1  
 9 pred5  test   ccc         standard       0.844
10 pred5  test   rpd         standard       1.93 
11 pred5  test   mape        standard      24.1  
12 pred5  test   huber_loss2 standard      10.8  
13 pred5  train  ccc         standard       0.958
14 pred5  train  rpd         standard       3.64 
15 pred5  train  mape        standard      12.8  
16 pred5  train  huber_loss2 standard       5.19 </code></pre>
</div>
</div>
</div>
<div class="page-columns page-full"><p>W przypadku gdybyśmy chcieli zdefiniować własną miarę, to oczywiście jest taka możliwość<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> polecam stronę pakietu <code>yardstick</code> - <a href="https://www.tidymodels.org/learn/develop/metrics/" class="uri">https://www.tidymodels.org/learn/develop/metrics/</a>.</p><div class="no-row-height column-margin column-container"><li id="fn8"><p><sup>8</sup>&nbsp;choć liczba już istniejących jest imponująca</p></li></div></div>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-EvaluatingForecastAccuracy" class="csl-entry" role="doc-biblioentry">
<em>3.4 <span>Evaluating</span> Forecast Accuracy | <span>Forecasting</span>: <span>Principles</span> and <span>Practice</span> (2nd Ed)</em>. b.d.
</div>
<div id="ref-bellon-maurelCriticalReviewChemometric2010" class="csl-entry" role="doc-biblioentry">
Bellon-Maurel, Véronique, Elvira Fernandez-Ahumada, Bernard Palagos, Jean-Michel Roger, i Alex McBratney. 2010. <span>„Critical Review of Chemometric Indicators Commonly Used for Assessing the Quality of the Prediction of Soil Attributes by <span>NIR</span> Spectroscopy”</span>. <em>TrAC Trends in Analytical Chemistry</em> 29 (9): 1073–81. <a href="https://doi.org/10.1016/j.trac.2010.05.006">https://doi.org/10.1016/j.trac.2010.05.006</a>.
</div>
<div id="ref-fransesNoteMeanAbsolute2016" class="csl-entry" role="doc-biblioentry">
Franses, Philip Hans. 2016. <span>„A Note on the <span>Mean Absolute Scaled Error</span>”</span>. <em>International Journal of Forecasting</em> 32 (1): 20–22. <a href="https://doi.org/10.1016/j.ijforecast.2015.03.008">https://doi.org/10.1016/j.ijforecast.2015.03.008</a>.
</div>
<div id="ref-hyndmanAnotherLookMeasures2006" class="csl-entry" role="doc-biblioentry">
Hyndman, Rob J., i Anne B. Koehler. 2006. <span>„Another Look at Measures of Forecast Accuracy”</span>. <em>International Journal of Forecasting</em> 22 (4): 679–88. <a href="https://doi.org/10.1016/j.ijforecast.2006.03.001">https://doi.org/10.1016/j.ijforecast.2006.03.001</a>.
</div>
<div id="ref-kvalsethCautionaryNoteR21985" class="csl-entry" role="doc-biblioentry">
Kvalseth, Tarald O. 1985. <span>„Cautionary <span>Note</span> about <span>R2</span>”</span>. <em>The American Statistician</em> 39 (4): 279–85. <a href="https://doi.org/10.2307/2683704">https://doi.org/10.2307/2683704</a>.
</div>
<div id="ref-yehAnalysisStrengthConcrete2006" class="csl-entry" role="doc-biblioentry">
Yeh, I.-Cheng. 2006. <span>„Analysis of <span>Strength</span> of <span>Concrete Using Design</span> of <span>Experiments</span> and <span>Neural Networks</span>”</span>. <em>Journal of Materials in Civil Engineering</em> 18 (4): 597–604. <a href="https://doi.org/10.1061/(ASCE)0899-1561(2006)18:4(597)">https://doi.org/10.1061/(ASCE)0899-1561(2006)18:4(597)</a>.
</div>
</div>
</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Skopiowano!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Skopiowano!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./infer.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Modele inferencyjne</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">Metody walidacji modeli statystycznych, Dariusz Majerek</div>   
    <div class="nav-footer-right">Książka została napisana w <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>


</body></html>