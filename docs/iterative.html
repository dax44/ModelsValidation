<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pl" xml:lang="pl"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.234">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Metody walidacji modeli statystycznych - 12&nbsp; Przeszukiwanie iteracyjne</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./parallel.html" rel="prev">
<link href="./cover.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Brak wyników",
    "search-matching-documents-text": "dopasowane dokumenty",
    "search-copy-link-title": "Kopiuj link do wyszukiwania",
    "search-hide-matches-text": "Ukryj dodatkowe dopasowania",
    "search-more-match-text": "więcej dopasowań w tym dokumencie",
    "search-more-matches-text": "więcej dopasowań w tym dokumencie",
    "search-clear-button-title": "Wyczyść",
    "search-detached-cancel-button-title": "Anuluj",
    "search-submit-button-title": "Zatwierdź"
  }
}</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Przełącz pasek boczny" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./iterative.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Przeszukiwanie iteracyjne</span></a></li></ol></nav>
      <a class="flex-grow-1" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Przełącz pasek boczny" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Szukaj" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Metody walidacji modeli statystycznych</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/dax44/ModelsValidation/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Przełącz tryb ciemny"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Przełącz tryb czytnika">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Szukaj"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Wprowadzenie</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Ekosystem</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modeling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Modelowanie statystyczne</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./infer.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Modele inferencyjne</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./measures.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Przegląd miar dopasowania modelu</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resampling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Zarządzanie danymi</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidymodels.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Praca z <code>tidymodels</code></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resampling2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Metody próbkowania</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./comparison.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Porównanie modeli</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tuning.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Optymalizacja modeli</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./grid_search.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Dostrajanie z przeszukiwaniem siatki</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./parallel.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Paralelizacja resamplingu</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./iterative.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Przeszukiwanie iteracyjne</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Spis treści</h2>
   
  <ul>
<li>
<a href="#optymalizacja-bayesowska" id="toc-optymalizacja-bayesowska" class="nav-link active" data-scroll-target="#optymalizacja-bayesowska"><span class="header-section-number">12.1</span> Optymalizacja bayesowska</a>
  <ul class="collapse">
<li><a href="#model-procesu-gaussowskiego" id="toc-model-procesu-gaussowskiego" class="nav-link" data-scroll-target="#model-procesu-gaussowskiego"><span class="header-section-number">12.1.1</span> Model procesu gaussowskiego</a></li>
  <li><a href="#funkcja-akwizycji" id="toc-funkcja-akwizycji" class="nav-link" data-scroll-target="#funkcja-akwizycji"><span class="header-section-number">12.1.2</span> Funkcja akwizycji</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/dax44/ModelsValidation/issues/new" class="toc-action">Zgłoś problem</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Przeszukiwanie iteracyjne</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>W poprzednich rozdziałach pokazano, jak wyszukiwanie oparte o siatkę przyjmuje wstępnie zdefiniowany zestaw wartości kandydujących, ocenia je, a następnie wybiera najlepsze ustawienia. Iteracyjne metody wyszukiwania realizują inną strategię. Podczas procesu wyszukiwania przewidują one, które wartości należy przetestować w następnej kolejności.</p>
<p>W tym rozdziale przedstawiono dwie metody wyszukiwania. Najpierw omówimy optymalizację bayesowską, która wykorzystuje model statystyczny do przewidywania lepszych ustawień parametrów. Następnie rozdział opisuje metodę globalnego wyszukiwania zwaną symulowanym wyżarzaniem (ang. <em>simulated annealing</em>).</p>
<p>Do ilustracji wykorzystujemy te same dane dotyczące charakterystyki komórek, co w poprzednim rozdziale, ale zmieniamy model. W tym rozdziale użyjemy modelu maszyny wektorów nośnych (ang. <em>Support Vector Machine</em>), ponieważ zapewnia on ładne dwuwymiarowe wizualizacje procesów wyszukiwania. Dwa dostrajane parametry w optymalizacji to wartość kosztu SVM i parametr jądra funkcji radialnej <span class="math inline">\(\sigma\)</span>. Oba parametry mogą mieć znaczący wpływ na złożoność i wydajność modelu.</p>
<p>Model SVM wykorzystuje iloczyn skalarny i z tego powodu konieczne jest wyśrodkowanie i przeskalowanie predyktorów. Obiekty <code>tidymodels</code>: <code>svm_rec</code>, <code>svm_spec</code> i <code>svm_wflow</code> definiują proces tworzenia modelu:</p>
<div class="cell">
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://tidymodels.tidymodels.org/reference/tidymodels_prefer.html">tidymodels_prefer</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">cells</span><span class="op">)</span></span>
<span><span class="va">cells</span> <span class="op">&lt;-</span> <span class="va">cells</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">case</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1304</span><span class="op">)</span></span>
<span><span class="va">cell_folds</span> <span class="op">&lt;-</span> <span class="fu">vfold_cv</span><span class="op">(</span><span class="va">cells</span><span class="op">)</span></span>
<span></span>
<span><span class="va">svm_rec</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">recipe</span><span class="op">(</span><span class="va">class</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">cells</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">step_YeoJohnson</span><span class="op">(</span><span class="fu">all_numeric_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">step_normalize</span><span class="op">(</span><span class="fu">all_numeric_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">svm_spec</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">svm_rbf</span><span class="op">(</span>cost <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>, rbf_sigma <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">set_engine</span><span class="op">(</span><span class="st">"kernlab"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">set_mode</span><span class="op">(</span><span class="st">"classification"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">svm_wflow</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">add_model</span><span class="op">(</span><span class="va">svm_spec</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">svm_rec</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Oto domyślne zakresy tuningowanych parametrów:</p>
<div class="cell">
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">cost</span><span class="op">(</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Cost (quantitative)
Transformer: log-2 [1e-100, Inf]
Range (transformed scale): [-10, 5]</code></pre>
</div>
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">rbf_sigma</span><span class="op">(</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Radial Basis Function sigma (quantitative)
Transformer: log-10 [1e-100, Inf]
Range (transformed scale): [-10, 0]</code></pre>
</div>
</div>
<p>Dla ilustracji, zmieńmy nieco zakres parametrów jądra, aby poprawić wizualizacje wyszukiwania:</p>
<div class="cell">
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">svm_param</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">svm_wflow</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">extract_parameter_set_dials</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span>rbf_sigma <span class="op">=</span> <span class="fu">rbf_sigma</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">7</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Zanim omówimy szczegóły dotyczące wyszukiwania iteracyjnego i jego działania, zbadajmy związek między dwoma parametrami dostrajania SVM a obszarem pod krzywą ROC dla tego konkretnego zestawu danych. Skonstruowaliśmy bardzo dużą regularną siatkę, składającą się z 2500 wartości kandydujących, i oceniliśmy siatkę przy użyciu resamplingu. Jest to oczywiście niepraktyczne w regularnej analizie danych i ogromnie nieefektywne. Jednakże, wyjaśnia ścieżkę, którą powinien podążać proces wyszukiwania i gdzie występuje numerycznie optymalna wartość (wartości).</p>
<div id="fig-iter1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/Zrzut ekranu 2023-03-9 o 11.49.58.png" class="img-fluid figure-img" width="600"></p>
<p></p><figcaption class="figure-caption">Rysunek&nbsp;12.1: Mapa ciepła średniego obszaru pod krzywą ROC dla siatki o dużej gęstości wartości dostrajania parametrów. Najlepszy punkt jest oznaczony kropką w prawym górnym rogu.</figcaption><p></p>
</figure>
</div>
<p><a href="#fig-iter1">Rysunek&nbsp;<span>12.1</span></a> pokazuje wyniki oceny tej siatki, przy czym jaśniejszy kolor odpowiada wyższej (lepszej) wydajności modelu. W dolnej przekątnej przestrzeni parametrów znajduje się duży obszar, który jest stosunkowo płaski i charakteryzuje się słabą wydajnością. Grzbiet najlepszej wydajności występuje w prawej górnej części przestrzeni. Czarna kropka wskazuje najlepsze ustawienia. Przejście od płaskiego obszaru słabych wyników do grzbietu najlepszej wydajności jest bardzo ostre. Występuje również gwałtowny spadek obszaru pod krzywą ROC tuż po prawej stronie grzbietu.</p>
<p>Procedury wyszukiwania, które będziemy przestawiać, wymagają przynajmniej kilku statystyk obliczonych na podstawie resamplingu. W tym celu poniższy kod tworzy małą regularną siatkę, która znajduje się w płaskiej części przestrzeni parametrów. Funkcja <code>tune_grid()</code> dokonuje próbkowania tej siatki:</p>
<div class="cell" data-hash="iterative_cache/html/unnamed-chunk-4_0be45f4da026955670e526b3d378055b">
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">roc_res</span> <span class="op">&lt;-</span> <span class="fu">metric_set</span><span class="op">(</span><span class="va">roc_auc</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1401</span><span class="op">)</span></span>
<span><span class="va">start_grid</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">svm_param</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span></span>
<span>    cost <span class="op">=</span> <span class="fu">cost</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">6</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    rbf_sigma <span class="op">=</span> <span class="fu">rbf_sigma</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">6</span>, <span class="op">-</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">grid_regular</span><span class="op">(</span>levels <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1402</span><span class="op">)</span></span>
<span><span class="va">svm_initial</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">svm_wflow</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">tune_grid</span><span class="op">(</span>resamples <span class="op">=</span> <span class="va">cell_folds</span>, grid <span class="op">=</span> <span class="va">start_grid</span>, metrics <span class="op">=</span> <span class="va">roc_res</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">collect_metrics</span><span class="op">(</span><span class="va">svm_initial</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 8
    cost rbf_sigma .metric .estimator  mean     n std_err .config             
   &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 0.0156  0.000001 roc_auc binary     0.864    10 0.00864 Preprocessor1_Model1
2 2       0.000001 roc_auc binary     0.863    10 0.00867 Preprocessor1_Model2
3 0.0156  0.0001   roc_auc binary     0.863    10 0.00862 Preprocessor1_Model3
4 2       0.0001   roc_auc binary     0.866    10 0.00855 Preprocessor1_Model4</code></pre>
</div>
</div>
<p>Ta początkowa siatka pokazuje dość równoważne wyniki, przy czym żaden pojedynczy punkt nie jest znacznie lepszy od pozostałych. Wyniki te mogą być wykorzystane przez funkcje iteracyjnego dostrajania jako wartości początkowe.</p>
<section id="optymalizacja-bayesowska" class="level2" data-number="12.1"><h2 data-number="12.1" class="anchored" data-anchor-id="optymalizacja-bayesowska">
<span class="header-section-number">12.1</span> Optymalizacja bayesowska</h2>
<p>Techniki optymalizacji bayesowskiej analizują bieżące wyniki próbkowania i tworzą model predykcyjny, aby zasugerować wartości parametrów dostrajania, które nie zostały jeszcze ocenione. Sugerowana kombinacja parametrów jest następnie ponownie próbkowana. Wyniki te są następnie wykorzystywane w innym modelu predykcyjnym, który rekomenduje więcej wartości kandydatów do testowania, i tak dalej. Proces ten przebiega przez ustaloną liczbę iteracji lub do momentu, gdy nie pojawią się dalsze poprawy. <span class="citation" data-cites="shahriari2016">Shahriari i in. (<a href="references.html#ref-shahriari2016" role="doc-biblioref">2016</a>)</span> i <span class="citation" data-cites="Frazier2018">Frazier (<a href="references.html#ref-Frazier2018" role="doc-biblioref">2018</a>)</span> są dobrymi wprowadzeniami do optymalizacji bayesowskiej.</p>
<p>Podczas korzystania z optymalizacji bayesowskiej, podstawowe problemy to sposób tworzenia modelu i wybór parametrów rekomendowanych przez ten model. Najpierw rozważmy technikę najczęściej stosowaną w optymalizacji bayesowskiej, czyli model procesu gaussowskiego.</p>
<section id="model-procesu-gaussowskiego" class="level3" data-number="12.1.1"><h3 data-number="12.1.1" class="anchored" data-anchor-id="model-procesu-gaussowskiego">
<span class="header-section-number">12.1.1</span> Model procesu gaussowskiego</h3>
<p>Modele procesu gaussowskiego (GP) <span class="citation" data-cites="schulz2016">(<a href="references.html#ref-schulz2016" role="doc-biblioref">Schulz, Speekenbrink, i Krause 2016</a>)</span>, to techniki statystyczne, które mają swoją historię w statystyce przestrzennej (pod nazwą metod <em>krigingu</em>). Mogą być wyprowadzone na wiele sposobów, w tym jako model Bayesowski.</p>
<p>Matematycznie, GP jest zbiorem zmiennych losowych, których wspólny rozkład prawdopodobieństwa jest wielowymiarowy normalny. W kontekście naszych zastosowań jest to zbiór metryk wydajności dla wartości kandydujących parametrów dostrajania. Dla początkowej siatki czterech próbek, realizacje tych czterech zmiennych losowych wynosiły 0.8639, 0.8625, 0.8627 i 0.8659. Zakłada się, że mają rozkład wielowymiarowy normalny. Wejściami definiującymi zmienne niezależne dla modelu GP są odpowiednie wartości dostrajania parametrów (przedstawione w <a href="#tbl-1">Tabela&nbsp;<span>12.1</span></a>).</p>
<div class="cell">
<div class="cell-output-display">

<div id="ckfdrklqyw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ckfdrklqyw .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ckfdrklqyw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ckfdrklqyw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ckfdrklqyw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ckfdrklqyw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ckfdrklqyw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ckfdrklqyw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ckfdrklqyw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ckfdrklqyw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ckfdrklqyw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ckfdrklqyw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ckfdrklqyw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ckfdrklqyw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ckfdrklqyw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ckfdrklqyw .gt_from_md > :first-child {
  margin-top: 0;
}

#ckfdrklqyw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ckfdrklqyw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ckfdrklqyw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ckfdrklqyw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ckfdrklqyw .gt_row_group_first td {
  border-top-width: 2px;
}

#ckfdrklqyw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ckfdrklqyw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ckfdrklqyw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ckfdrklqyw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ckfdrklqyw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ckfdrklqyw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ckfdrklqyw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ckfdrklqyw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ckfdrklqyw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ckfdrklqyw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ckfdrklqyw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ckfdrklqyw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ckfdrklqyw .gt_left {
  text-align: left;
}

#ckfdrklqyw .gt_center {
  text-align: center;
}

#ckfdrklqyw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ckfdrklqyw .gt_font_normal {
  font-weight: normal;
}

#ckfdrklqyw .gt_font_bold {
  font-weight: bold;
}

#ckfdrklqyw .gt_font_italic {
  font-style: italic;
}

#ckfdrklqyw .gt_super {
  font-size: 65%;
}

#ckfdrklqyw .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ckfdrklqyw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ckfdrklqyw .gt_indent_1 {
  text-indent: 5px;
}

#ckfdrklqyw .gt_indent_2 {
  text-indent: 10px;
}

#ckfdrklqyw .gt_indent_3 {
  text-indent: 15px;
}

#ckfdrklqyw .gt_indent_4 {
  text-indent: 20px;
}

#ckfdrklqyw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<div id="tbl-1" class="anchored">
<table class="gt_table table table-sm table-striped" data-quarto-postprocess="true">
<caption>Tabela&nbsp;12.1: Wartości startowe w procedurze poszukiwania optymalnych parametrów</caption>
<thead class="gt_col_headings"><tr class="header">
<th id="ROC" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ROC</th>
<th id="cost" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">cost</th>
<th id="rbf_sigma" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">rbf_sigma</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="ROC">0.8639</td>
<td class="gt_row gt_right" headers="cost">0.01562</td>
<td class="gt_row gt_right" headers="rbf_sigma">1e-06</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ROC">0.8625</td>
<td class="gt_row gt_right" headers="cost">2.00000</td>
<td class="gt_row gt_right" headers="rbf_sigma">1e-06</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ROC">0.8627</td>
<td class="gt_row gt_right" headers="cost">0.01562</td>
<td class="gt_row gt_right" headers="rbf_sigma">1e-04</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ROC">0.8659</td>
<td class="gt_row gt_right" headers="cost">2.00000</td>
<td class="gt_row gt_right" headers="rbf_sigma">1e-04</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<p>Modele procesów gaussowskich są określone przez ich funkcje średniej i kowariancji, choć to ta ostatnia ma większy wpływ na charakter modelu GP. Funkcja kowariancji jest często parametryzowana w kategoriach wartości wejściowych (oznaczanych jako <span class="math inline">\(x\)</span>). Przykładowo, powszechnie stosowaną funkcją kowariancji jest funkcja wykładnicza kwadratowa:</p>
<p><span id="eq-iter1"><span class="math display">\[
\operatorname{cov}(\boldsymbol{x}_i, \boldsymbol{x}_j) = \exp\left(-\frac{1}{2}|\boldsymbol{x}_i - \boldsymbol{x}_j|^2\right) + \sigma^2_{ij}
\tag{12.1}\]</span></span></p>
<p>gdzie <span class="math inline">\(\sigma_{i,j}^2\)</span> jest wariancją błędu modelu równą zero jeśli <span class="math inline">\(i=j\)</span>. Możemy to interpretować jako, że wraz ze wzrostem odległości pomiędzy dwoma kombinacjami parametrów, kowariancja pomiędzy metrykami wydajności rośnie wykładniczo. Z równania wynika również, że zmienność metryki wynikowej jest minimalizowana w punktach, które już zostały zaobserwowane (tzn. gdy <span class="math inline">\(|x_i - x_j|^2\)</span> wynosi zero). Charakter tej funkcji kowariancji pozwala procesowi gaussowskiemu reprezentować wysoce nieliniowe zależności między wydajnością modelu a dostrajaniem parametrów, nawet jeśli istnieje tylko niewielka ilość danych.</p>
<p>Ważną zaletą tego modelu jest to, że ponieważ określony jest pełny model prawdopodobieństwa, przewidywania dla nowych wejść mogą odzwierciedlać cały rozkład wyniku. Innymi słowy, nowe statystyki wydajności mogą być przewidywane zarówno pod względem średniej jak i wariancji.</p>
<p>Na podstawie początkowej siatki czterech wyników, model GP jest dopasowywany, następnie są obliczane z modelu predykcje dla kandydatów, a piąta kombinacja parametrów dostrajania jest wybierana. Obliczamy szacunkową wydajność dla nowej konfiguracji, GP jest ponownie dopasowywany do pięciu istniejących wyników (i tak dalej).</p>
</section><section id="funkcja-akwizycji" class="level3" data-number="12.1.2"><h3 data-number="12.1.2" class="anchored" data-anchor-id="funkcja-akwizycji">
<span class="header-section-number">12.1.2</span> Funkcja akwizycji</h3>
<p>Jak wykorzystać model procesu gaussowskiego po dopasowaniu do aktualnych danych? Naszym celem jest wybranie następnej kombinacji dostrajania parametrów, która najprawdopodobniej da “lepsze wyniki” niż obecna najlepsza. Jednym z podejść do tego jest stworzenie dużego zbioru kandydatów, a następnie wykonanie prognoz średniej i wariancji dla każdego z nich. Korzystając z tych informacji, wybieramy najkorzystniejszą wartość parametru dostrajania.</p>
<p>Klasa funkcji celu, zwanych funkcjami akwizycji, ułatwia kompromis pomiędzy średnią a wariancją. Przypomnijmy, że przewidywana wariancja modeli GP zależy głównie od tego, jak bardzo są one oddalone od istniejących danych. Kompromis pomiędzy przewidywaną średnią i wariancją dla nowych kandydatów jest często postrzegany przez pryzmat eksploracji i eksploatacji:</p>
<ul>
<li>Eksploracja (ang. <em>exploration</em>) - powoduje wybór tych regionów, w których jest mniej obserwowanych modeli kandydujących. W ten sposób nadaje się większą wagę kandydatom o wyższej wariancji i koncentruje się na poszukiwaniu nowych wyników.</li>
<li>Eksploatacja (ang. <em>exploitation</em>) - zasadniczo opiera się istniejących wynikach, w celu odnalezienia najlepszej wartości średniej.</li>
</ul>
<p>Aby zademonstrować, spójrzmy na przykład z jednym parametrem, który ma wartości pomiędzy [0, 1], a metryką wydajności jest <span class="math inline">\(R^2\)</span>. Prawdziwa funkcja jest pokazana na <a href="#fig-iter2">Rysunek&nbsp;<span>12.2</span></a> wraz z pięcioma wartościami kandydującymi, które mają istniejące wyniki jako punkty.</p>
<div id="fig-iter2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/Zrzut ekranu 2023-03-9 o 22.39.44.png" class="img-fluid figure-img" width="600"></p>
<p></p><figcaption class="figure-caption">Rysunek&nbsp;12.2: Hipotetyczny rzeczywisty profil wydajności dla arbitralnie wybranego parametru dostrajania, z pięcioma szacowanymi punktami</figcaption><p></p>
</figure>
</div>
<p>Dla tych danych dopasowanie modelu GP przedstawiono na <a href="#fig-iter3">Rysunek&nbsp;<span>12.3</span></a>. Zacieniowany obszar wskazuje średnią <span class="math inline">\(\pm\)</span> 1 błąd standardowy. Dwie pionowe linie wskazują dwa punkty kandydujące, które są później bardziej szczegółowo badane. Zacieniowany obszar ufności pokazuje funkcję wykładniczej wariancji kwadratowej; staje się ona bardzo duża między punktami i zbiega do zera w istniejących punktach danych.</p>
<div id="fig-iter3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/Zrzut ekranu 2023-03-9 o 22.44.09.png" class="img-fluid figure-img" width="600"></p>
<p></p><figcaption class="figure-caption">Rysunek&nbsp;12.3: Przykładowy przebieg procesu gaussowskiego z zaznaczoną funkcją średniej i wariancji</figcaption><p></p>
</figure>
</div>
<p>Ta nieliniowa funkcja przechodzi przez każdy obserwowany punkt, ale model nie jest doskonały. Nie ma obserwowanych punktów w pobliżu prawdziwego optimum ustawienia, a w tym regionie dopasowanie mogłoby być znacznie lepsze. Pomimo tego, model GP może skutecznie wskazać nam właściwy kierunek.</p>
<p>Z punktu widzenia czystej eksploatacji, najlepszym wyborem byłoby wybranie wartości parametru, który ma najlepszą średnią predykcję. W tym przypadku byłaby to wartość 0,106, tuż na prawo od istniejącego najlepszego zaobserwowanego punktu na poziomie 0,09.</p>
<p>Jako sposób na zachęcenie do eksploracji, prostym (ale nie często stosowanym) podejściem jest znalezienie parametru dostrajania związanego z największym przedziałem ufności.</p>
<p>Jedną z najczęściej stosowanych funkcji akwizycji jest oczekiwana poprawa. Pojęcie poprawy wymaga wartości dla bieżących najlepszych wyników (w przeciwieństwie do podejścia opartego na przedziałach ufności). Ponieważ GP może opisać nowy punkt kandydacki za pomocą rozkładu, możemy ważyć fragmenty rozkładu, które wykazują poprawę, używając prawdopodobieństwa wystąpienia poprawy.</p>
<p>Na przykład, rozważmy dwie wartości parametrów kandydujących 0,10 i 0,25 (wskazane przez pionowe linie na <a href="#fig-iter3">Rysunek&nbsp;<span>12.3</span></a>). Używając dopasowanego modelu GP, ich przewidywane <span class="math inline">\(R^2\)</span> są pokazane na rysunku 14.4 wraz z linią odniesienia dla aktualnych najlepszych wyników.</p>
<div id="fig-iter4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/Zrzut ekranu 2023-03-9 o 22.57.54.png" class="img-fluid figure-img" width="600"></p>
<p></p><figcaption class="figure-caption">Rysunek&nbsp;12.4: Przewidywane rozkłady wydajności dla dwóch próbkowanych wartości parametrów dostrajania</figcaption><p></p>
</figure>
</div>
<p>Rozpatrując tylko średnią <span class="math inline">\(R^2\)</span> lepszym wyborem jest wartość parametru 0,10 (patrz <a href="#tbl-1">Tabela&nbsp;<span>12.1</span></a>). Rekomendacja parametru dostrajania dla 0,25 ma gorsze przewidywanie średnie niż aktualny najlepszy kandydat. Jednakże, ponieważ ma wyższą wariancję, ma większy ogólny obszar prawdopodobieństwa powyżej aktualnego najlepszego. W rezultacie ma większą oczekiwaną poprawę:</p>
<div class="cell">
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tab2</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">Parameter.Value</span>,  <span class="op">~</span><span class="va">Mean</span>,  <span class="op">~</span><span class="va">Std.Dev</span>, <span class="op">~</span><span class="va">Expected.Improvment</span>,</span>
<span>               <span class="fl">0.1</span>, <span class="fl">0.8679</span>, <span class="fl">0.0004317</span>,              <span class="fl">0.00019</span>,</span>
<span>              <span class="fl">0.25</span>, <span class="fl">0.8671</span>, <span class="fl">0.0039301</span>,             <span class="fl">0.001216</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu">gt</span><span class="op">(</span><span class="va">tab2</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div id="xxcquxcyhl" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#xxcquxcyhl .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xxcquxcyhl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xxcquxcyhl .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xxcquxcyhl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xxcquxcyhl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xxcquxcyhl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xxcquxcyhl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xxcquxcyhl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xxcquxcyhl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xxcquxcyhl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xxcquxcyhl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xxcquxcyhl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xxcquxcyhl .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xxcquxcyhl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xxcquxcyhl .gt_from_md > :first-child {
  margin-top: 0;
}

#xxcquxcyhl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xxcquxcyhl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xxcquxcyhl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xxcquxcyhl .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xxcquxcyhl .gt_row_group_first td {
  border-top-width: 2px;
}

#xxcquxcyhl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxcquxcyhl .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xxcquxcyhl .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xxcquxcyhl .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xxcquxcyhl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxcquxcyhl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xxcquxcyhl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xxcquxcyhl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xxcquxcyhl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xxcquxcyhl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxcquxcyhl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xxcquxcyhl .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxcquxcyhl .gt_left {
  text-align: left;
}

#xxcquxcyhl .gt_center {
  text-align: center;
}

#xxcquxcyhl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xxcquxcyhl .gt_font_normal {
  font-weight: normal;
}

#xxcquxcyhl .gt_font_bold {
  font-weight: bold;
}

#xxcquxcyhl .gt_font_italic {
  font-style: italic;
}

#xxcquxcyhl .gt_super {
  font-size: 65%;
}

#xxcquxcyhl .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#xxcquxcyhl .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xxcquxcyhl .gt_indent_1 {
  text-indent: 5px;
}

#xxcquxcyhl .gt_indent_2 {
  text-indent: 10px;
}

#xxcquxcyhl .gt_indent_3 {
  text-indent: 15px;
}

#xxcquxcyhl .gt_indent_4 {
  text-indent: 20px;
}

#xxcquxcyhl .gt_indent_5 {
  text-indent: 25px;
}
</style>
<div id="tbl-2" class="anchored">
<table class="gt_table table table-sm table-striped" data-quarto-postprocess="true">
<caption>Tabela&nbsp;12.2: Oczekiwana poprawa dla dwóch kandydujących parametrów dostrajania.</caption>
<thead class="gt_col_headings"><tr class="header">
<th id="Parameter.Value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Parameter.Value</th>
<th id="Mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Mean</th>
<th id="Std.Dev" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Std.Dev</th>
<th id="Expected.Improvment" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Expected.Improvment</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="Parameter.Value">0.10</td>
<td class="gt_row gt_right" headers="Mean">0.8679</td>
<td class="gt_row gt_right" headers="Std.Dev">0.0004317</td>
<td class="gt_row gt_right" headers="Expected.Improvment">0.000190</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="Parameter.Value">0.25</td>
<td class="gt_row gt_right" headers="Mean">0.8671</td>
<td class="gt_row gt_right" headers="Std.Dev">0.0039301</td>
<td class="gt_row gt_right" headers="Expected.Improvment">0.001216</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<p>Kiedy oczekiwana poprawa jest obliczana w całym zakresie dostrajania parametrów, zalecany punkt do próbkowania jest znacznie bliższy 0,25 niż 0,10, jak pokazano na rysunku 14.5.</p>
<div id="fig-iter5" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/Zrzut ekranu 2023-03-9 o 23.05.39.png" class="img-fluid figure-img" width="600"></p>
<p></p><figcaption class="figure-caption">Rysunek&nbsp;12.5: Szacowany profil wydajności wygenerowany przez model procesu gaussowskiego (górny panel) oraz oczekiwana poprawa (dolny panel). Pionowa linia wskazuje punkt maksymalnej poprawy.</figcaption><p></p>
</figure>
</div>
<p>Aby zaimplementować wyszukiwanie iteracyjne poprzez optymalizację bayesowską, należy użyć funkcji <code>tune_bayes()</code>. Jej składnia jest bardzo podobna do <code>tune_grid()</code>, z kilkoma dodatkowymi argumentami:</p>
<ul>
<li>
<code>iter</code> to maksymalna liczba iteracji wyszukiwania.</li>
<li>
<code>initial</code> może być liczbą całkowitą, obiektem utworzonym przy pomocy <code>tune_grid()</code>, albo jedną z funkcji wyścigowych. Użycie liczby całkowitej określa rozmiar konstrukcji wypełniającej przestrzeń, która jest próbkowana przed pierwszym modelem GP.</li>
<li>
<code>objective</code> jest argumentem, dla którego należy użyć funkcji akwizycji. Pakiet <code>tune</code> zawiera funkcje takie jak <code>exp_improve()</code> lub <code>conf_bound()</code>.</li>
<li>Argument <code>param_info</code>, w tym przypadku określa zakres parametrów, jak również wszelkie transformacje.</li>
</ul>
<p>Argument <code>control</code> funkcji <code>tune_bayes()</code> ustawia się za pomocą <code>control_bayes()</code>. Niektóre istotne argumenty to:</p>
<ul>
<li>
<code>no_improve</code> to liczba całkowita, która zatrzyma wyszukiwanie, jeśli ulepszone parametry nie zostaną odkryte w ciągu iteracji <code>no_improve</code>.</li>
<li>
<code>uncertain</code> jest również liczbą całkowitą (lub <code>Inf</code>), używaną do ustalenia liczby przejść algorytmu wg reguły eksploatacji bez poprawy, aby następnie wybrać próbę z zakresu z wysoką wariancją, po to żeby dokonać eksploracji.</li>
<li>
<code>verbose</code> jest parametrem, który decyduje co będzie się wyświetlało podczas przebiegu algorytmu.</li>
</ul>
<p>Użyjmy pierwszych wyników SVM jako początkowego podłoża dla modelu GP. Przypomnijmy, że w tym zastosowaniu chcemy zmaksymalizować obszar pod krzywą ROC.</p>
<div class="cell">
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># cache: true</span></span>
<span><span class="va">ctrl</span> <span class="op">&lt;-</span> <span class="fu">control_bayes</span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1403</span><span class="op">)</span></span>
<span><span class="va">svm_bo</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">svm_wflow</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tune_bayes</span><span class="op">(</span></span>
<span>    resamples <span class="op">=</span> <span class="va">cell_folds</span>,</span>
<span>    metrics <span class="op">=</span> <span class="va">roc_res</span>,</span>
<span>    initial <span class="op">=</span> <span class="va">svm_initial</span>,</span>
<span>    param_info <span class="op">=</span> <span class="va">svm_param</span>,</span>
<span>    iter <span class="op">=</span> <span class="fl">25</span>,</span>
<span>    control <span class="op">=</span> <span class="va">ctrl</span></span>
<span>  <span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">collect_metrics</span><span class="op">(</span><span class="va">svm_bo</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">gt</span><span class="op">(</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div id="ccavykzgfg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ccavykzgfg .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ccavykzgfg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ccavykzgfg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ccavykzgfg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ccavykzgfg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ccavykzgfg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ccavykzgfg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ccavykzgfg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ccavykzgfg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ccavykzgfg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ccavykzgfg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ccavykzgfg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ccavykzgfg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ccavykzgfg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ccavykzgfg .gt_from_md > :first-child {
  margin-top: 0;
}

#ccavykzgfg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ccavykzgfg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ccavykzgfg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ccavykzgfg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ccavykzgfg .gt_row_group_first td {
  border-top-width: 2px;
}

#ccavykzgfg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ccavykzgfg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ccavykzgfg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ccavykzgfg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ccavykzgfg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ccavykzgfg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ccavykzgfg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ccavykzgfg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ccavykzgfg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ccavykzgfg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ccavykzgfg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ccavykzgfg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ccavykzgfg .gt_left {
  text-align: left;
}

#ccavykzgfg .gt_center {
  text-align: center;
}

#ccavykzgfg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ccavykzgfg .gt_font_normal {
  font-weight: normal;
}

#ccavykzgfg .gt_font_bold {
  font-weight: bold;
}

#ccavykzgfg .gt_font_italic {
  font-style: italic;
}

#ccavykzgfg .gt_super {
  font-size: 65%;
}

#ccavykzgfg .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ccavykzgfg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ccavykzgfg .gt_indent_1 {
  text-indent: 5px;
}

#ccavykzgfg .gt_indent_2 {
  text-indent: 10px;
}

#ccavykzgfg .gt_indent_3 {
  text-indent: 15px;
}

#ccavykzgfg .gt_indent_4 {
  text-indent: 20px;
}

#ccavykzgfg .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped" data-quarto-postprocess="true">
<thead class="gt_col_headings"><tr class="header">
<th id="cost" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">cost</th>
<th id="rbf_sigma" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">rbf_sigma</th>
<th id=".metric" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.metric</th>
<th id=".estimator" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.estimator</th>
<th id="mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mean</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
<th id="std_err" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">std_err</th>
<th id=".config" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.config</th>
<th id=".iter" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.iter</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="cost">1.562500e-02</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.000000e-06</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8638724</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008637894</td>
<td class="gt_row gt_left" headers=".config">Preprocessor1_Model1</td>
<td class="gt_row gt_right" headers=".iter">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">2.000000e+00</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.000000e-06</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8625326</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008672545</td>
<td class="gt_row gt_left" headers=".config">Preprocessor1_Model2</td>
<td class="gt_row gt_right" headers=".iter">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">1.562500e-02</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.000000e-04</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8627495</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008624554</td>
<td class="gt_row gt_left" headers=".config">Preprocessor1_Model3</td>
<td class="gt_row gt_right" headers=".iter">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">2.000000e+00</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.000000e-04</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8659439</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008545691</td>
<td class="gt_row gt_left" headers=".config">Preprocessor1_Model4</td>
<td class="gt_row gt_right" headers=".iter">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">8.381539e+00</td>
<td class="gt_row gt_right" headers="rbf_sigma">5.408960e-07</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8625673</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008627089</td>
<td class="gt_row gt_left" headers=".config">Iter1</td>
<td class="gt_row gt_right" headers=".iter">1</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">5.608902e+00</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.613260e-04</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8728182</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008236644</td>
<td class="gt_row gt_left" headers=".config">Iter2</td>
<td class="gt_row gt_right" headers=".iter">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">1.600639e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.983450e-04</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8781692</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008684509</td>
<td class="gt_row gt_left" headers=".config">Iter3</td>
<td class="gt_row gt_right" headers=".iter">3</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">2.541191e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">2.585081e-04</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8832282</td>
<td class="gt_row gt_right" headers="n">9</td>
<td class="gt_row gt_right" headers="std_err">0.009833644</td>
<td class="gt_row gt_left" headers=".config">Iter4</td>
<td class="gt_row gt_right" headers=".iter">4</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">2.912115e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">3.961177e-04</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8894476</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008674057</td>
<td class="gt_row gt_left" headers=".config">Iter5</td>
<td class="gt_row gt_right" headers=".iter">5</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">2.282106e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">7.094282e-04</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8933213</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008618012</td>
<td class="gt_row gt_left" headers=".config">Iter6</td>
<td class="gt_row gt_right" headers=".iter">6</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">3.049977e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.166976e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8978111</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008046705</td>
<td class="gt_row gt_left" headers=".config">Iter7</td>
<td class="gt_row gt_right" headers=".iter">7</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">3.155839e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">2.888618e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8925884</td>
<td class="gt_row gt_right" headers="n">9</td>
<td class="gt_row gt_right" headers="std_err">0.008601545</td>
<td class="gt_row gt_left" headers=".config">Iter8</td>
<td class="gt_row gt_right" headers=".iter">8</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">1.312493e-03</td>
<td class="gt_row gt_right" headers="rbf_sigma">9.584302e-02</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8762837</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008684225</td>
<td class="gt_row gt_left" headers=".config">Iter9</td>
<td class="gt_row gt_right" headers=".iter">9</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">2.908667e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.420931e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8979937</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007875059</td>
<td class="gt_row gt_left" headers=".config">Iter10</td>
<td class="gt_row gt_right" headers=".iter">10</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">1.058781e-03</td>
<td class="gt_row gt_right" headers="rbf_sigma">2.364654e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8656167</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008754313</td>
<td class="gt_row gt_left" headers=".config">Iter11</td>
<td class="gt_row gt_right" headers=".iter">11</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">3.154910e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.210898e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8978275</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007994954</td>
<td class="gt_row gt_left" headers=".config">Iter12</td>
<td class="gt_row gt_right" headers=".iter">12</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">3.073241e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.451115e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8982018</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007819465</td>
<td class="gt_row gt_left" headers=".config">Iter13</td>
<td class="gt_row gt_right" headers=".iter">13</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">3.033878e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">9.917137e-02</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8770458</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008412071</td>
<td class="gt_row gt_left" headers=".config">Iter14</td>
<td class="gt_row gt_right" headers=".iter">14</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">1.129147e-03</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.026267e-07</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8641243</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008666403</td>
<td class="gt_row gt_left" headers=".config">Iter15</td>
<td class="gt_row gt_right" headers=".iter">15</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">3.111979e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.698500e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8986102</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007828958</td>
<td class="gt_row gt_left" headers=".config">Iter16</td>
<td class="gt_row gt_right" headers=".iter">16</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">1.128109e-03</td>
<td class="gt_row gt_right" headers="rbf_sigma">9.256031e-06</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8639301</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008622849</td>
<td class="gt_row gt_left" headers=".config">Iter17</td>
<td class="gt_row gt_right" headers=".iter">17</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">9.925669e-04</td>
<td class="gt_row gt_right" headers="rbf_sigma">2.237736e-02</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8744407</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008990285</td>
<td class="gt_row gt_left" headers=".config">Iter18</td>
<td class="gt_row gt_right" headers=".iter">18</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">3.133523e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.896086e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8984786</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007870489</td>
<td class="gt_row gt_left" headers=".config">Iter19</td>
<td class="gt_row gt_right" headers=".iter">19</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">3.064022e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.581975e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8985440</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007808150</td>
<td class="gt_row gt_left" headers=".config">Iter20</td>
<td class="gt_row gt_right" headers=".iter">20</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">1.480665e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.821641e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8953765</td>
<td class="gt_row gt_right" headers="n">9</td>
<td class="gt_row gt_right" headers="std_err">0.008709148</td>
<td class="gt_row gt_left" headers=".config">Iter21</td>
<td class="gt_row gt_right" headers=".iter">21</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">3.184368e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.715154e-03</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8987420</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007764247</td>
<td class="gt_row gt_left" headers=".config">Iter22</td>
<td class="gt_row gt_right" headers=".iter">22</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">2.927864e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">8.793267e-06</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8674531</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008316968</td>
<td class="gt_row gt_left" headers=".config">Iter23</td>
<td class="gt_row gt_right" headers=".iter">23</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">2.878067e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">2.244728e-02</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8544690</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.009459848</td>
<td class="gt_row gt_left" headers=".config">Iter24</td>
<td class="gt_row gt_right" headers=".iter">24</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">1.456602e+01</td>
<td class="gt_row gt_right" headers="rbf_sigma">1.021120e-07</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8623536</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.008611959</td>
<td class="gt_row gt_left" headers=".config">Iter25</td>
<td class="gt_row gt_right" headers=".iter">25</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">show_best</span><span class="op">(</span><span class="va">svm_bo</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">gt</span><span class="op">(</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div id="oidkveixax" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#oidkveixax .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#oidkveixax .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oidkveixax .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#oidkveixax .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#oidkveixax .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#oidkveixax .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oidkveixax .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oidkveixax .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#oidkveixax .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#oidkveixax .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#oidkveixax .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#oidkveixax .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#oidkveixax .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#oidkveixax .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#oidkveixax .gt_from_md > :first-child {
  margin-top: 0;
}

#oidkveixax .gt_from_md > :last-child {
  margin-bottom: 0;
}

#oidkveixax .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#oidkveixax .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#oidkveixax .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#oidkveixax .gt_row_group_first td {
  border-top-width: 2px;
}

#oidkveixax .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oidkveixax .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#oidkveixax .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#oidkveixax .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oidkveixax .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oidkveixax .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#oidkveixax .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#oidkveixax .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oidkveixax .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oidkveixax .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#oidkveixax .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oidkveixax .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#oidkveixax .gt_left {
  text-align: left;
}

#oidkveixax .gt_center {
  text-align: center;
}

#oidkveixax .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#oidkveixax .gt_font_normal {
  font-weight: normal;
}

#oidkveixax .gt_font_bold {
  font-weight: bold;
}

#oidkveixax .gt_font_italic {
  font-style: italic;
}

#oidkveixax .gt_super {
  font-size: 65%;
}

#oidkveixax .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#oidkveixax .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#oidkveixax .gt_indent_1 {
  text-indent: 5px;
}

#oidkveixax .gt_indent_2 {
  text-indent: 10px;
}

#oidkveixax .gt_indent_3 {
  text-indent: 15px;
}

#oidkveixax .gt_indent_4 {
  text-indent: 20px;
}

#oidkveixax .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped" data-quarto-postprocess="true">
<thead class="gt_col_headings"><tr class="header">
<th id="cost" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">cost</th>
<th id="rbf_sigma" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">rbf_sigma</th>
<th id=".metric" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.metric</th>
<th id=".estimator" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.estimator</th>
<th id="mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mean</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
<th id="std_err" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">std_err</th>
<th id=".config" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.config</th>
<th id=".iter" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.iter</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="cost">31.84368</td>
<td class="gt_row gt_right" headers="rbf_sigma">0.001715154</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8987420</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007764247</td>
<td class="gt_row gt_left" headers=".config">Iter22</td>
<td class="gt_row gt_right" headers=".iter">22</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">31.11979</td>
<td class="gt_row gt_right" headers="rbf_sigma">0.001698500</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8986102</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007828958</td>
<td class="gt_row gt_left" headers=".config">Iter16</td>
<td class="gt_row gt_right" headers=".iter">16</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">30.64022</td>
<td class="gt_row gt_right" headers="rbf_sigma">0.001581975</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8985440</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007808150</td>
<td class="gt_row gt_left" headers=".config">Iter20</td>
<td class="gt_row gt_right" headers=".iter">20</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="cost">31.33523</td>
<td class="gt_row gt_right" headers="rbf_sigma">0.001896086</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8984786</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007870489</td>
<td class="gt_row gt_left" headers=".config">Iter19</td>
<td class="gt_row gt_right" headers=".iter">19</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="cost">30.73241</td>
<td class="gt_row gt_right" headers="rbf_sigma">0.001451115</td>
<td class="gt_row gt_left" headers=".metric">roc_auc</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers="mean">0.8982018</td>
<td class="gt_row gt_right" headers="n">10</td>
<td class="gt_row gt_right" headers="std_err">0.007819465</td>
<td class="gt_row gt_left" headers=".config">Iter13</td>
<td class="gt_row gt_right" headers=".iter">13</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details open=""><summary>Kod</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">autoplot</span><span class="op">(</span><span class="va">svm_bo</span>, type <span class="op">=</span> <span class="st">"performance"</span><span class="op">)</span></span></code><button title="Kopiuj do schowka" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="iterative_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Poniższa animacja wizualizuje wyniki wyszukiwania. Czarne “x” pokazują wartości początkowe zawarte w <code>svm_initial</code>. Niebieski panel u góry po lewej stronie pokazuje przewidywaną średnią wartość obszaru pod krzywą ROC. Czerwony panel na górze po prawej stronie pokazuje przewidywaną zmienność wartości ROC, podczas gdy dolny wykres wizualizuje oczekiwaną poprawę. W każdym panelu ciemniejsze kolory wskazują mniej atrakcyjne wartości (np. małe wartości średnie, duże zróżnicowanie i małe ulepszenia).</p>
<div id="fig-iter6" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><video src="https://www.tmwr.org/bo_search.mp4" class="img-fluid" controls=""><a href="https://www.tmwr.org/bo_search.mp4">Video</a></video></p>
<p></p><figcaption class="figure-caption">Rysunek&nbsp;12.6: Przykład działania optymalizacji bayesowskiej</figcaption><p></p>
</figure>
</div>
<p>Powierzchnia przewidywanej średniej jest bardzo niedokładna w pierwszych kilku iteracjach wyszukiwania. Pomimo tego, pomaga ona poprowadzić proces w rejon dobrej wydajności. W ciągu pierwszych dziesięciu iteracji, wyszukiwanie jest dokonywane w pobliżu optymalnego miejsca.</p>
<p>Podczas gdy najlepsza kombinacja dostrajania parametrów znajduje się na granicy przestrzeni parametrów, optymalizacja bayesowska często wybierze nowe punkty poza granicami przestrzeni parametrów.</p>
<p>Powyższy przykład startował z punktów startowych wybranych nieco arbitralnie ale nieco lepsze wyniki można osiągnąć stosując losowe wypełnienie przestrzeni parametrów.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-Frazier2018" class="csl-entry" role="listitem">
Frazier, Peter I. 2018. <span>„A Tutorial on Bayesian Optimization”</span>. <a href="https://doi.org/10.48550/ARXIV.1807.02811">https://doi.org/10.48550/ARXIV.1807.02811</a>.
</div>
<div id="ref-schulz2016" class="csl-entry" role="listitem">
Schulz, Eric, Maarten Speekenbrink, i Andreas Krause. 2016. <span>„A tutorial on Gaussian process regression: Modelling, exploring, and exploiting functions”</span>. <a href="http://dx.doi.org/10.1101/095190">http://dx.doi.org/10.1101/095190</a>.
</div>
<div id="ref-shahriari2016" class="csl-entry" role="listitem">
Shahriari, Bobak, Kevin Swersky, Ziyu Wang, Ryan P. Adams, i Nando de Freitas. 2016. <span>„Taking the Human Out of the Loop: A Review of Bayesian Optimization”</span>. <em>Proceedings of the IEEE</em> 104 (1): 148–75. <a href="https://doi.org/10.1109/jproc.2015.2494218">https://doi.org/10.1109/jproc.2015.2494218</a>.
</div>
</div>
</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Skopiowano!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Skopiowano!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./parallel.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Paralelizacja resamplingu</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">Metody walidacji modeli statystycznych, Dariusz Majerek</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Książka została napisana w <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>


</body></html>